- name: startCustomServiceNonBlocking
  action: aws:runCommand
  inputs:
    DocumentName: AWS-RunPowerShellScript
    Targets:
      - Key: InstanceIds
        Values:
          - '{{ runInstances.InstanceId }}'
    Parameters:
      commands:
        # 作業ディレクトリをバッチの場所に（相対参照対策）
        - Set-Location -Path 'D:\UNYO\service'
        # 非同期でバッチ起動して即戻る
        - Start-Process -FilePath "cmd.exe" -ArgumentList '/c ""D:\UNYO\service\service.bat"" 3' -WindowStyle Hidden
