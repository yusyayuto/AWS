お世話になっております。

現在、SSMオートメーションを用いてフェイルオーバー処理を自動化しています。
処理の中で ALB ターゲットグループから対象インスタンスを DeregisterTargets により登録解除するステップを実装していますが、
あるサーバーに対して実行した際に「ターゲットグループから登録解除できず、オートメーションが失敗する」事象が発生しました。

その後、該当サーバーを再起動し、さらに対象ターゲットグループから手動で登録解除→再登録を行ったところ、
同じオートメーションを実行しても正常に完了することを確認しました。

---

### 相談したい点
- なぜ最初の実行時には DeregisterTargets が正しく動作しなかったのか、考えられる原因を調査いただきたい。
- 今後も同様の事象が発生する可能性があるかを確認したい。
- 発生を未然に防ぐ、あるいは自動化側でリカバリできるようなベストプラクティス（リトライ方法、状態チェック方法、設計上の注意点など）があればご教示いただきたい。

---

### 参考情報
- 対象サービス: EC2 / ALB / SSM Automation
- API: DeregisterTargets
- Runbook内で DeregisterTargets → describe_target_health による確認を行っています
- 事象発生時は対象インスタンスが TG に登録されている状態でしたが、解除できませんでした
- サーバー再起動、ターゲット再登録を実施後は正常に動作しました
